# Zenith Clicker

    Welcome to Zenith Clicker! Select required tarots to send players to scale the tower.  
    The higher the tower, the more tricky players will come!  
    There's no leaderboard, but how high can you reach?

> All Arts & Sounds from [TETR.IO](https://tetr.io) by osk, an online stacker game with Awesome Graphics and Musics!

**WARNING**: This game requires you know tetr.io QP2's systems and mods, or you won't get much fun.  
If you like QP2 but don't know much about it, check another repo of mine: [QP2 Documentation](https://github.com/MrZ626/io_qp2_rule) (Chinese, but there are some translated forks). It's a full explanation (almost) of QP2, including many technical details behind the scene, helping you play QP2 with better strategies!

**Zenith Clicker** is a game inspired by mod selection screen of tetr.io QP2.  
But its interactive feel is really not good for quickly picking the mods needed,  
and there's still no convenient way to know which mods are included in a specific combo.

Powered by LÖVE & Zenitha & Lua ~~instead of slow web engine~~

Credits:  
*MrZ*: Programming, game design, general development  
*DJ Asriel*: Background reconstruction  
*CreepercraftYT*: Detailed mod icons  
*Dr Ocelot*: Audio & Music  
*osk*: Founder & lead producer of tetr.io  
*Garbo*: Game & world design of tetr.io  
*Frutigеr*: Font designer (D-Din-Pro)  
*Mooniak*: Font designer (AbhayaLibre-Regular)

## Behind The Scene

### Clicker Rating (CR)

Just like TR, the maximum value is 25000,  
but CR is calculated from:

1. Best Height (5k)
1. Best Time (5k)
1. Mod Completion (3k)
1. Mod Speedrun (2k)
1. Zenith Point (3k)
1. Daily Challenge (2k)
2. Achievement (5k)

For the exactly formula, see function `calculateRating()` in this [file](/module/scene/stat.lua)

### Zenith Point (ZP)

You gain ZP after a run, with `ZP = altitude * multiplier`, which `multiplier` is taken from:

|   Mod    |  EX   |  NH   |  MS   |    GV     |    VL     |     DH     |  IN   |  AS   |     DP     |
| :------: | :---: | :---: | :---: | :-------: | :-------: | :--------: | :---: | :---: | :--------: |
| Upright  |  1.4  |  1.1  |  1.2  |    1.1    |    1.1    |    1.2     |  1.1  | 0.85  |    0.95    |
| Reversed |  2.6  |  1.6  |  2.0  | 1.2+.03*M | 1.2+.02*M | 1.6+.4*rIN |   X   |  1.1  | 2.2-.6*rEX |

> M = (Other) Mod Count  
> X = rNH ? (DP or rDP ? 2 : 2.2) : 1.6

And `Hard Mode Decay` = 0.99, this applies `number_of_EX_or_Rev - 1` times.

Total ZP is soft-capped by your skill:

```lua
STAT.zp = max(
    STAT.zp, -- Won't drop
    STAT.zp < zpEarn * 16 and min(STAT.zp + zpEarn, zpEarn * 16) or -- Gain full before 16*zpGain
    zpEarn * 16 + (STAT.zp - zpEarn * 16) * (9 / 10) + (zpEarn * 10) * (1 / 10) -- Slower from 16*zpGain, slower and slower when getting close to the hard-cap (26*zpGain)
)
```

Total ZP decays ~2.6%/d. `ZP*= e^(-0.026)`

Also, DC Highscore decays ~6%/d. `DC*= e^(-0.0626)`

## TODO

### Daily Challenge Leaderboard

Resets every day

HTTP, only 2 APIs:

**Upload score**

```
request: POST {
string special_unique_id, -- Generated by client side, not changable, always unique
string username, -- display name
string combo, -- to check is it really today's combo
number score,
}
response: 200 OK
```

**Fetch leaderboard**

```
struct score {
    number score,
    string username,
}

PLAN A:
request: GET {special_unique_id}
response: 200 OK {
    score[5] first5scores,
    score[5] closest5scores, -- self-2 ~ self+2
}

PLAN B:
request: GET {special_unique_id}
response: 200 OK {
    score[5] first5scores,
    number[5] scoresOfEachSection, -- 10/20/30/50/75%-th score
}
```

## Design draft of Cliker League (Probably won't be implemented)

**Main idea**: Sending mod effect to opponent

Two players start the run same with single player.

**Sending Buffer**: your attacks will be turned into time (1 atk = 1 sec) and stored in this buffer.  
When it's not increasing for 3 seconds or taking time-damage, all times will be send to opponent.

The last card you activated is the effect which you will send.

**Cancelling**: Before sending `effect-time` to opponent, it will try to cancel the same effect you are carrying first, with a 2x multiplier.  
So you cannot force opponent EX if you have EX already.

**Sending**: After Cancelling, if there's extra time remain, your opponent will receive it.

Game ends when one of the players lose all HP.
